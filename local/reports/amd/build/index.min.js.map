{"version":3,"file":"index.min.js","sources":["../src/index.js"],"sourcesContent":["// // File: local/reports/amd/src/index.js\n// define(['jquery'], function($) {\n//     return {\n//         init: function() {\n//             index.dom.main = $(document).find(\"#report-container\");\n//             index.dom.addSendingProfile = index.dom.main.find(\".add_sending_profile\");\n\n//             console.log('local_reports/index module initialized.');\n//         }\n//     };\n// });\n\ndefine([\n  'jquery',\n  // 'core/str',\n  'core/ajax',\n  'core/url',\n  'core/notification',\n  // 'core/st_loader',\n\n  ], function(\n    $,\n    // str,\n    ajax,\n    moodleurl,\n    // notification,\n    // stLoader,\n  ) {\n      var index = {\n          dom: {\n              main: null,\n              submit: null,\n          },\n\n        //   langs: {\n        //       somethingWentWrong: null,\n        //       clickHereToDelete: null,\n        //       clickHereToEdit: null,\n        //       sendingProfileAdded: null,\n        //       sendingProfileupadate: null,\n        //       deletesendingProfile: null,\n        //       areYouSure: null,\n        //       yes: null,\n        //       no: null,\n        //       SendingProfiledeleted: null,\n        //       clickHereTosendTestMail: null,\n        //       mailSent: null,\n        //       unableToSendMail: null,\n        //   },\n\n        //   variables: {\n        //       dataTableReference: null,\n        //       type: null,\n        //       currentIdValues: null,\n        //       sendMailId: null,\n        //   },\n\n          actions: {\n              getString: function() {\n                index.init();\n                //   index.variables.type = type;\n                //   str.get_strings([\n                    //   {\n                    //       key: \"something_went_wrong\",\n                    //       component: \"local_micro_learning\"\n                    //   },\n                    //   {\n                    //       key: \"click_here_to_delete\",\n                    //       component: \"local_micro_learning\"\n                    //   },\n                    //   {\n                    //       key: \"click_here_to_edit\",\n                    //       component: \"local_micro_learning\"\n                    //   },\n                    //   {\n                    //       key: \"smtp_added\",\n                    //       component: \"local_micro_learning\"\n                    //   },\n                    //   {\n                    //       key: \"smtp_updated\",\n                    //       component: \"local_micro_learning\",\n                    //   },\n                    //   {\n                    //       key: \"delete_smtp\",\n                    //       component: \"local_micro_learning\",\n                    //   },\n                    //   {\n                    //       key: \"are_you_sure\",\n                    //       component: \"local_micro_learning\"\n                    //   },\n                    //   {\n                    //       key: \"yes\"\n                    //   },\n                    //   {\n                    //       key: \"no\",\n                    //       component: \"local_micro_learning\"\n                    //   },\n                    //   {\n                    //       key: \"smtp_deleted\",\n                    //       component: \"local_micro_learning\",\n                    //   },\n                    //   {\n                    //       key: \"click_here_to_send_test_mail\",\n                    //       component: \"local_micro_learning\",\n                    //   },\n                    //   {\n                    //       key: \"mail_sent\",\n                    //       component: \"local_micro_learning\",\n                    //   },\n                    //   {\n                    //       key: \"unable_to_send_mail\",\n                    //       component: \"local_micro_learning\",\n                    //   },\n                //   ]).done(function(s) {\n                    //   index.langs.somethingWentWrong = s[0];\n                    //   index.langs.clickHereToDelete = s[1];\n                    //   index.langs.clickHereToEdit = s[2];\n                    //   index.langs.sendingProfileAdded = s[3];\n                    //   index.langs.sendingProfileupadate = s[4];\n                    //   index.langs.deletesendingProfile = s[5];\n                    //   index.langs.areYouSure = s[6];\n                    //   index.langs.yes = s[7];\n                    //   index.langs.no = s[8];\n                    //   index.langs.SendingProfiledeleted = s[9];\n                    //   index.langs.clickHereTosendTestMail = s[10];\n                    //   index.langs.mailSent = s[11];\n                    //   index.langs.unableToSendMail = s[12];\n\n                //       index.init();\n                //   });\n              },\n\n            //   validation: function(sendMail = false) {\n            //       var emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\n            //       var regex = /^[0-9]+$/;\n\n            //       index.dom.name = $(document).find(\"#profilename\");\n            //       index.dom.from = $(document).find(\"#profilefrom\");\n            //       index.dom.host = $(document).find(\"#host\");\n            //       index.dom.username = $(document).find(\"#username\");\n            //       index.dom.password = $(document).find(\"#password\");\n            //       index.dom.sendMailTo = $(document).find(\"#testmailto\");\n            //       index.dom.sMTPSecure = $(document).find(\"#smtpsecure\");\n            //       index.dom.port = $(document).find(\"#port\");\n\n            //       if (index.dom.name.val().trim() == \"\") {\n            //           index.dom.name.val(\"\").addClass(\"is-invalid\");\n            //           return false;\n            //       } else {\n            //           index.dom.name.removeClass(\"is-invalid\");\n            //       }\n\n            //       if (index.dom.from.val().trim() == \"\") {\n            //           index.dom.from.val(\"\").addClass(\"is-invalid\");\n            //           return false;\n            //       } else if (\n            //           !emailPattern.test(index.dom.from.val().trim())\n            //       ) {\n            //           index.dom.from.val(\"\").addClass(\"is-invalid\");\n            //           return false;\n            //       } else {\n            //           index.dom.from.removeClass(\"is-invalid\");\n            //       }\n\n            //       if (index.dom.host.val().trim() == \"\") {\n            //           index.dom.host.val(\"\").addClass(\"is-invalid\");\n            //           return false;\n            //       } else {\n            //           index.dom.host.removeClass(\"is-invalid\");\n            //       }\n\n            //       if (index.dom.username.val() == \"\") {\n            //           index.dom.username.val(\"\").addClass(\"is-invalid\");\n            //           return false;\n            //       } else {\n            //           index.dom.username.removeClass(\"is-invalid\");\n            //       }\n\n            //       if (sendMail) {\n            //           if (index.dom.sendMailTo.val() == \"\") {\n            //               index.dom.sendMailTo.val(\"\").addClass(\"is-invalid\");\n            //               return false;\n            //           } else if (!emailPattern.test(index.dom.sendMailTo.val().trim())) {\n            //               index.dom.sendMailTo.val(\"\").addClass(\"is-invalid\");\n            //               return false;\n            //           } else {\n            //               index.dom.sendMailTo.removeClass(\"is-invalid\");\n            //           }\n            //       }\n\n            //       if (index.dom.password.val().trim() == \"\") {\n            //           index.dom.password.val(\"\").addClass(\"is-invalid\");\n            //           return false;\n            //       } else {\n            //           index.dom.password.removeClass(\"is-invalid\");\n            //       }\n\n            //       if (index.dom.sMTPSecure.val().trim() == \"\") {\n            //           index.dom.sMTPSecure.val(\"\").addClass(\"is-invalid\");\n            //           return false;\n            //       } else {\n            //           index.dom.sMTPSecure.removeClass(\"is-invalid\");\n            //       }\n\n            //       if (index.dom.port.val().trim() == \"\") {\n            //           index.dom.port.val(\"\").addClass(\"is-invalid\");\n            //           return false;\n            //       } else if (!regex.test(index.dom.port.val().trim())) {\n            //           index.dom.port.val(\"\").addClass(\"is-invalid\");\n            //           return false;\n            //       } else {\n            //           index.dom.port.removeClass(\"is-invalid\");\n            //           return true;\n            //       }\n            //   },\n\n            //   editSendingProfile: function(modal, e) {\n            //       var promises = ajax.call([\n            //           {\n            //               methodname: \"local_micro_learning_manage_smtp\",\n            //               args: {\n            //                   name: index.dom.name.val(),\n            //                   from: index.dom.from.val(),\n            //                   host: index.dom.host.val(),\n            //                   username: index.dom.username.val(),\n            //                   password: index.dom.password.val(),\n            //                   smtpsecure: index.dom.sMTPSecure.val().trim(),\n            //                   port: index.dom.port.val(),\n            //                   id: $(e.currentTarget).attr(\"data-edit\"),\n            //                   type: index.variables.type,\n            //               },\n            //           },\n            //       ]);\n            //       promises[0].done(function() {\n            //           modal.hide();\n            //           modal.destroy();\n            //           notification.addNotification({\n            //               message: index.langs.sendingProfileupadate,\n            //               type: \"success\",\n            //           });\n            //           index.variables.dataTableReference.draw();\n            //       }).fail(function() {\n            //           notification.addNotification({\n            //               message: index.langs.somethingWentWrong,\n            //               type: \"error\",\n            //           });\n            //       });\n            //   },\n\n            //   addSendingProfile: function(modal) {\n            //       var promises = ajax.call([\n            //           {\n            //               methodname: \"local_micro_learning_manage_smtp\",\n            //               args: {\n            //                   name: index.dom.name.val(),\n            //                   from: index.dom.from.val(),\n            //                   host: index.dom.host.val(),\n            //                   username: index.dom.username.val(),\n            //                   password: index.dom.password.val(),\n            //                   smtpsecure: index.dom.sMTPSecure.val().trim(),\n            //                   port: index.dom.port.val(),\n            //                   type: index.variables.type,\n            //               },\n            //           },\n            //       ]);\n            //       promises[0].done(function() {\n            //           modal.hide();\n            //           modal.destroy();\n            //           notification.addNotification({\n            //               message: index.langs.sendingProfileAdded,\n            //               type: \"success\",\n            //           });\n            //           index.variables.dataTableReference.draw();\n            //       }).fail(function() {\n            //           notification.addNotification({\n            //               message: index.langs.somethingWentWrong,\n            //               type: \"error\",\n            //           });\n            //       });\n            //   },\n\n            //   sendTestMail: function(modal) {\n            //       stLoader.showLoader();\n            //       var promises = ajax.call([\n            //       {\n            //           methodname: \"local_micro_learning_send_test_mail\",\n            //               args: {\n            //                   name: index.dom.name.val(),\n            //                   from: index.dom.from.val(),\n            //                   host: index.dom.host.val(),\n            //                   username: index.dom.username.val(),\n            //                   password: index.dom.password.val(),\n            //                   sendMailTo: index.dom.sendMailTo.val(),\n            //                   smtpsecure: index.dom.sMTPSecure.val().trim(),\n            //                   port: index.dom.port.val(),\n            //               },\n            //           },\n            //       ]);\n            //       promises[0].done(function(response) {\n            //           stLoader.hideLoader();\n            //           if (response === false) {\n            //               $('.invalid_sending_profile_alert').removeClass('d-none');\n            //           } else {\n            //               $('.mail_sent_alert').removeClass('d-none');\n            //           }\n            //       }).fail(function() {\n            //           stLoader.hideLoader();\n            //           modal.hide();\n            //           modal.destroy();\n            //           notification.addNotification({\n            //               message: index.langs.somethingWentWrong,\n            //               type: \"error\",\n            //           });\n            //       });\n            //   },\n\n            //   deleteSendingProfile: function(id) {\n            //       stLoader.showLoader();\n            //       var promises = ajax.call([\n            //           {\n            //               methodname: \"local_micro_learninig_delete_smtp\",\n            //                   args: {\n            //                       id: id,\n            //                   },\n            //           },\n            //       ]);\n            //       promises[0].done(function() {\n            //           stLoader.hideLoader();\n            //           notification.addNotification({\n            //               message: index.langs.SendingProfiledeleted,\n            //               type: \"success\",\n            //           });\n            //           index.variables.dataTableReference.draw();\n            //       }).fail(function() {\n            //           notification.addNotification({\n            //               message: index.langs.somethingWentWrong,\n            //               type: \"error\",\n            //           });\n            //       });\n            //   },\n\n              url: function() {\n                //   stLoader.showLoader();\n                  var promises = ajax.call([\n                      {\n                          methodname: \"local_reports_course\",\n                              args: {\n                                  idnumber: 1234,\n                              },\n                      },\n                  ]);\n                  promises[0].done(function() {\n                    //   index.dom.sendTestMailModal.modal('hide');\n                    //   if () {\n                    // //       notification.addNotification({\n                    // //           message: index.langs.mailSent,\n                    // //           type: \"success\",\n                    // //       });\n                    //   } else {\n                    //     //   notification.addNotification({\n                    //     //       message: index.langs.unableToSendMail,\n                    //     //       type: \"error\",\n                    //     //   });\n                    //   }\n\n                  });\n                //   .fail(function() {\n                //       notification.addNotification({\n                //           message: index.langs.somethingWentWrong,\n                //           type: \"error\",\n                //       });\n                //   });\n              }\n          },\n          init: function() {\n              index.dom.main = $(document).find(\"#report-container\");\n              index.dom.submit = index.dom.main.find(\"button\");    \n              index.dom.submit.on(\"click\", function() {\n                window.location = moodleurl.relativeUrl(\n                  '/local/reports/user_list.php?id=' + 3\n              );\n\n              });\n          },\n      };\n    return {\n      init: index.actions.getString,\n      };\n  });\n"],"names":["define","$","ajax","moodleurl","index","dom","main","submit","actions","getString","init","url","call","methodname","args","idnumber","done","document","find","on","window","location","relativeUrl"],"mappings":"AAYAA,6BAAO,CACL,SAEA,YACA,WACA,sBAGG,SACDC,EAEAC,KACAC,WAIE,IAAIC,MAAQ,CACRC,IAAK,CACDC,KAAM,KACNC,OAAQ,MA0BZC,QAAS,CACLC,UAAW,WACTL,MAAMM,MAuEP,EAmNDC,IAAK,WAEcT,KAAKU,KAAK,CACrB,CACIC,WAAY,uBACRC,KAAM,CACFC,SAAU,SAIjB,GAAGC,MAAK,WAchB,GAOL,GAEJN,KAAM,WACFN,MAAMC,IAAIC,KAAOL,EAAEgB,UAAUC,KAAK,qBAClCd,MAAMC,IAAIE,OAASH,MAAMC,IAAIC,KAAKY,KAAK,UACvCd,MAAMC,IAAIE,OAAOY,GAAG,SAAS,WAC3BC,OAAOC,SAAWlB,UAAUmB,YAC1B,oCAGJ,GACJ,GAEN,MAAO,CACLZ,KAAMN,MAAMI,QAAQC,UAExB"}